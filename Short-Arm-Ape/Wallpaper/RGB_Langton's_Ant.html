<!DOCTYPE html>
<!--
Generated by DeepSeek, modified and published by Short_Arm_Ape.
由DeepSeek生成，由短臂猿修改并发布。
Source code URL/源码网址 : https://github.com/Short-Arm-Ape/rubbish_bin/tree/main/Short-Arm-Ape/Wallpaper/RGB_Langton's_Ant.html
Modification time/修改时间 : 2025/6/23-03:18:45 (UTC+8)
ver 2
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RGB_Langton's_Ant - Enhanced</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #000;
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            height: 100vh;
            color: #fff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }
        
        .info-panel {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(10, 20, 40, 0.85);
            border: 1px solid rgba(0, 200, 255, 0.6);
            border-radius: 6px;
            padding: 12px;
            z-index: 10;
            width: 100px;
            backdrop-filter: blur(5px);
            box-shadow: 0 0 15px rgba(0, 150, 255, 0.3);
            font-size: 12px;
        }
        
        .info-panel h2 {
            color: #4ff;
            margin-bottom: 8px;
            font-size: 14px;
            text-align: center;
            padding-bottom: 6px;
            border-bottom: 1px solid rgba(0, 200, 255, 0.4);
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            padding: 4px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .info-label {
            color: #aaa;
            min-width: 0px;
        }
        
        .info-value {
            color: #fff;
            font-weight: 500;
            text-align: right;
            min-width: 50px;
        }
        
        .ant-status {
            margin-top: 8px;
        }
        
        .ant-status .info-row {
            display: flex;
            align-items: center;
        }
        
        .ant-color {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 6px;
        }
        
        #redAnt .ant-color { background: #ff5555; }
        #greenAnt .ant-color { background: #55ff55; }
        #blueAnt .ant-color { background: #5555ff; }
        
        .grid-size {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(10, 20, 40, 0.85);
            border: 1px solid rgba(0, 200, 255, 0.6);
            border-radius: 6px;
            padding: 8px 12px;
            z-index: 10;
            font-size: 11px;
            color: #aaa;
        }
        
        .controls {
            position: absolute;
            bottom: 20px;
            right: 20px;
            z-index: 10;
            display: flex;
            gap: 10px;
        }
        
        .btn {
            background: rgba(0, 100, 200, 0.7);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }
        
        .btn:hover {
            background: rgba(0, 150, 255, 0.9);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <canvas id="antCanvas"></canvas>
    <div class="info-panel">
        <h2 id="panelTitle">RGB Langton's Ant State</h2>
        <div class="performance-info">
            <div class="info-row">
                <span class="info-label" id="runtimeLabel">Runtime</span>
                <span id="runTime" class="info-value">0s</span>
            </div>
            <div class="info-row">
                <span class="info-label" id="fpsLabel">FPS</span>
                <span id="fps" class="info-value">0</span>
            </div>
            <div class="info-row">
                <span class="info-label" id="speedLabel">Speed</span>
                <span id="speed" class="info-value">0</span>
            </div>
            <div class="info-row">
                <span class="info-label" id="stepsLabel">Total steps</span>
                <span id="stepCount" class="info-value">0</span>
            </div>
        </div>
        
        <div class="ant-status">
            <div id="redAnt" class="info-row">
                <span class="info-label"><span class="ant-color"></span><span id="redLabel">Red ant direction</span></span>
                <span id="redDir" class="info-value">上</span>
            </div>
            <div id="greenAnt" class="info-row">
                <span class="info-label"><span class="ant-color"></span><span id="greenLabel">Green ant direction</span></span>
                <span id="greenDir" class="info-value">上</span>
            </div>
            <div id="blueAnt" class="info-row">
                <span class="info-label"><span class="ant-color"></span><span id="blueLabel">Blue ant direction</span></span>
                <span id="blueDir" class="info-value">上</span>
            </div>
        </div>
    </div>
    
    <div class="grid-size">
        <span id="gridLabel">Grid Size</span>: <span id="gridSize">0×0</span>
    </div>
    
    <div class="controls">
        <button id="resetBtn" class="btn">Reset Ants</button>
        <button id="speedUpBtn" class="btn">Speed Up</button>
        <button id="speedDownBtn" class="btn">Slow Down</button>
    </div>

    <script>
        // 多语言资源 / Multilingual resources / Recursos multilingües / Ressources multilingues
        const translations = {
            en: {
                panelTitle: "Status",
                runtime: "Time",
                fps: "FPS",
                speed: "Speed",
                steps: "Steps",
                redAnt: "R",
                greenAnt: "G",
                blueAnt: "B",
                grid: "Grid",
                directions: ["U", "R", "D", "L"]
            },
            zh: {
                panelTitle: "状态",
                runtime: "时长",
                fps: "帧率",
                speed: "速度",
                steps: "步数",
                redAnt: "红",
                greenAnt: "绿",
                blueAnt: "蓝",
                grid: "网格",
                directions: ["上", "右", "下", "左"]
            },
            es: {
                panelTitle: "Estado de la Hormiga",
                runtime: "Tiempo",
                fps: "FPS",
                speed: "Velocidad",
                steps: "Pasos Totales",
                redAnt: "Roja",
                greenAnt: "Verde",
                blueAnt: "Azul",
                grid: "Cuadrícula",
                directions: ["Arriba", "Derecha", "Abajo", "Izquierda"]
            },
            ja: {
                panelTitle: "状態",
                runtime: "時間",
                fps: "FPS",
                speed: "速度",
                steps: "ステップ数",
                redAnt: "赤",
                greenAnt: "緑",
                blueAnt: "青",
                grid: "グリッド",
                directions: ["上", "右", "下", "左"]
            },
            ko: {
                panelTitle: "상태",
                runtime: "시간",
                fps: "FPS",
                speed: "속도",
                steps: "단계",
                redAnt: "빨간색",
                greenAnt: "녹색",
                blueAnt: "파란",
                grid: "그리드",
                directions: ["위", "오른쪽", "아래", "왼쪽"]
            },
            fr: {
                panelTitle: "Statut",
                runtime: "Heure",
                fps: "FPS",
                speed: "Vitesse",
                steps: "Étapes",
                redAnt: "rouge",
                greenAnt: "Vert",
                blueAnt: "Bleu",
                grid: "Grille",
                directions: ["Haut", "Droite", "Bas", "Gauche"]
            },
            ru: {
                panelTitle: "Статус",
                runtime: "Время",
                fps: "FPS",
                speed: "Скорость",
                steps: "Шаги",
                redAnt: "Красный",
                greenAnt: "Зелёная",
                blueAnt: "Синий",
                grid: "Сетка",
                directions: ["Вверх", "Вправо", "Вниз", "Влево"]
    }
        };
        
        // 当前语言（根据浏览器语言自动设置）
        // Current language (automatically set based on browser language)
        // Idioma actual (configurado automáticamente según el idioma del navegador)
        // Langue actuelle (définie automatiquement en fonction de la langue du navigateur)
        const browserLang = navigator.language.substring(0, 2);
        const supportedLangs = ['en', 'zh', 'es', 'ja', 'ko','fr','ru'];
        const currentLang = supportedLangs.includes(browserLang) ? browserLang : 'en';
        
        // 获取Canvas元素和上下文
        // Get Canvas element and context
        // Obtener elemento Canvas y contexto
        // Obtenir l'élément Canvas et le contexte
        const canvas = document.getElementById('antCanvas');
        const ctx = canvas.getContext('2d');
        
        // 状态显示元素
        // State display elements
        // Elementos de visualización de estado
        // Éléments d'affichage d'état
        const panelTitle = document.getElementById('panelTitle');
        const runTimeEl = document.getElementById('runTime');
        const fpsEl = document.getElementById('fps');
        const speedEl = document.getElementById('speed');
        const stepCountEl = document.getElementById('stepCount');
        const redDirEl = document.getElementById('redDir');
        const greenDirEl = document.getElementById('greenDir');
        const blueDirEl = document.getElementById('blueDir');
        const gridSizeEl = document.getElementById('gridSize');
        
        // 标签元素
        // Label elements
        // Elementos de etiqueta
        // Éléments d'étiquette
        const runtimeLabel = document.getElementById('runtimeLabel');
        const fpsLabel = document.getElementById('fpsLabel');
        const speedLabel = document.getElementById('speedLabel');
        const stepsLabel = document.getElementById('stepsLabel');
        const redLabel = document.getElementById('redLabel');
        const greenLabel = document.getElementById('greenLabel');
        const blueLabel = document.getElementById('blueLabel');
        const gridLabel = document.getElementById('gridLabel');
        
        // 控制按钮
        // Control buttons
        // Botones de control
        // Boutons de contrôle
        const resetBtn = document.getElementById('resetBtn');
        const speedUpBtn = document.getElementById('speedUpBtn');
        const speedDownBtn = document.getElementById('speedDownBtn');
        
        // 格子大小（像素）
        // Cell size (pixels)
        // Tamaño de celda (píxeles)
        // Taille de cellule (pixels)
        const CELL_SIZE = 5;
        
        // 性能变量
        // Performance variables
        // Variables de rendimiento
        // Variables de performance
        let lastTime = 0;
        let frameCount = 0;
        let fps = 0;
        let startTime = Date.now();
        let stepCount = 0;
        let stepsPerFrame = 1;
        
        // 网格和蚂蚁变量
        // Grid and ant variables
        // Variables de cuadrícula y hormigas
        // Variables de grille et de fourmis
        let gridWidth, gridHeight;
        let grid = [];
        let ants = [];
        
        // 设置语言
        // Set language
        // Establecer idioma
        // Définir la langue
        function setLanguage(lang) {
            const t = translations[lang];
            
            // 更新界面文本
            // Update UI text
            // Actualizar texto de la interfaz de usuario
            // Mettre à jour le texte de l'interface utilisateur
            panelTitle.textContent = t.panelTitle;
            runtimeLabel.textContent = t.runtime;
            fpsLabel.textContent = t.fps;
            speedLabel.textContent = t.speed;
            stepsLabel.textContent = t.steps;
            redLabel.textContent = t.redAnt;
            greenLabel.textContent = t.greenAnt;
            blueLabel.textContent = t.blueAnt;
            gridLabel.textContent = t.grid;
            
            // 更新蚂蚁方向
            // Update ant directions
            // Actualizar direcciones de hormigas
            // Mettre à jour les directions des fourmis
            updateInfoPanel();
        }
        
        // 设置Canvas大小为窗口大小
        // Set canvas size to window size
        // Establecer el tamaño del lienzo al tamaño de la ventana
        // Définir la taille du canevas à la taille de la fenêtre
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            // 重新计算网格尺寸
            // Recalculate grid dimensions
            // Recalcular dimensiones de la cuadrícula
            // Recalculer les dimensions de la grille
            gridWidth = Math.floor(canvas.width / CELL_SIZE);
            gridHeight = Math.floor(canvas.height / CELL_SIZE);
            
            gridSizeEl.textContent = `${gridWidth}×${gridHeight}`;
            
            // 重新初始化网格和蚂蚁
            // Reinitialize grid and ants
            // Reinicializar cuadrícula y hormigas
            // Réinitialiser la grille et les fourmis
            initGrid();
            initAnts();
        }
        
        // 初始化网格
        // Initialize grid
        // Inicializar cuadrícula
        // Initialiser la grille
        function initGrid() {
            grid = new Array(gridHeight);
            for (let y = 0; y < gridHeight; y++) {
                grid[y] = new Array(gridWidth);
                for (let x = 0; x < gridWidth; x++) {
                    grid[y][x] = { r: 0, g: 0, b: 0 }; // 初始化为黑色 / Initialized to black / Inicializado a negro / Initialisé en noir
                }
            }
        }
        
        // 蚂蚁类定义
        // Ant class definition
        // Definición de clase de hormiga
        // Définition de la classe fourmi
        class Ant {
            constructor(x, y, name) {
                this.name = name;
                this.initialX = x;
                this.initialY = y;
                this.reset();
            }
            
            reset() {
                this.x = this.initialX;
                this.y = this.initialY;
                // 初始方向随机（0-上，1-右，2-下，3-左）
                // Initial direction random (0-up, 1-right, 2-down, 3-left)
                // Dirección inicial aleatoria (0-arriba, 1-derecha, 2-abajo, 3-izquierda)
                // Direction initiale aléatoire (0-haut, 1-droite, 2-bas, 3-gauche)
                this.direction = Math.floor(Math.random() * 4);
            }
            
            getColorComponents() {
                if (this.name === 'red') return { r: 255, g: 0, b: 0 };
                if (this.name === 'green') return { r: 0, g: 255, b: 0 };
                if (this.name === 'blue') return { r: 0, g: 0, b: 255 };
                return { r: 0, g: 0, b: 0 };
            }
            
            getColor() {
                if (this.name === 'red') return '#FF0000';
                if (this.name === 'green') return '#00FF00';
                if (this.name === 'blue') return '#0000FF';
                return '#000000';
            }
            
            // 判断当前格子是否包含蚂蚁的颜色分量
            // Determine if the current cell contains the ant's color component
            // Determinar si la celda actual contiene el componente de color de la hormiga
            // Déterminer si la cellule actuelle contient la composante de couleur de la fourmi
            isBlackCell(gridX, gridY) {
                const cell = grid[gridY][gridX];
                if (this.name === 'red') return cell.r > 0;
                if (this.name === 'green') return cell.g > 0;
                if (this.name === 'blue') return cell.b > 0;
                return false;
            }
            
            // 更新蚂蚁位置和方向
            // Update ant position and direction
            // Actualizar posición y dirección de la hormiga
            // Mettre à jour la position et la direction de la fourmi
            update() {
                const gridX = Math.floor(this.x / CELL_SIZE);
                const gridY = Math.floor(this.y / CELL_SIZE);
                const comp = this.getColorComponents();
                
                if (this.isBlackCell(gridX, gridY)) {
                    // 黑格：左转90度
                    // Black cell: turn left 90 degrees
                    // Celda negra: girar 90 grados a la izquierda
                    // Cellule noire : tourner à gauche de 90 degrés
                    this.direction = (this.direction + 3) % 4;
                    // 移除蚂蚁的颜色分量
                    // Remove ant's color component
                    // Eliminar componente de color de la hormiga
                    // Supprimer la composante de couleur de la fourmi
                    grid[gridY][gridX].r = Math.max(0, grid[gridY][gridX].r - comp.r);
                    grid[gridY][gridX].g = Math.max(0, grid[gridY][gridX].g - comp.g);
                    grid[gridY][gridX].b = Math.max(0, grid[gridY][gridX].b - comp.b);
                } else {
                    // 白格：右转90度
                    // White cell: turn right 90 degrees
                    // Celda blanca: girar 90 grados a la derecha
                    // Cellule blanche : tourner à droite de 90 degrés
                    this.direction = (this.direction + 1) % 4;
                    // 添加蚂蚁的颜色分量
                    // Add ant's color component
                    // Agregar componente de color de la hormiga
                    // Ajouter la composante de couleur de la fourmi
                    grid[gridY][gridX].r = Math.min(255, grid[gridY][gridX].r + comp.r);
                    grid[gridY][gridX].g = Math.min(255, grid[gridY][gridX].g + comp.g);
                    grid[gridY][gridX].b = Math.min(255, grid[gridY][gridX].b + comp.b);
                }
                
                // 根据方向移动蚂蚁
                // Move ant based on direction
                // Mover la hormiga según la dirección
                // Déplacer la fourmi en fonction de la direction
                switch (this.direction) {
                    case 0: // 上 / Up / Arriba / Haut
                        this.y -= CELL_SIZE;
                        break;
                    case 1: // 右 / Right / Derecha / Droite
                        this.x += CELL_SIZE;
                        break;
                    case 2: // 下 / Down / Abajo / Bas
                        this.y += CELL_SIZE;
                        break;
                    case 3: // 左 / Left / Izquierda / Gauche
                        this.x -= CELL_SIZE;
                        break;
                }
                
                // 边界处理（从对边出现）
                // Boundary handling (wrap around)
                // Manejo de límites (aparecer en el lado opuesto)
                // Gestion des limites (réapparaître du côté opposé)
                if (this.x < 0) this.x = canvas.width - CELL_SIZE;
                if (this.x >= canvas.width) this.x = 0;
                if (this.y < 0) this.y = canvas.height - CELL_SIZE;
                if (this.y >= canvas.height) this.y = 0;
            }
            
            getDirectionName() {
                return translations[currentLang].directions[this.direction];
            }
        }
        
        // 创建三只蚂蚁（随机位置）
        // Create three ants (random positions)
        // Crear tres hormigas (posiciones aleatorias)
        // Créer trois fourmis (positions aléatoires)
        function initAnts() {
            ants = [
                // 红色蚂蚁（随机位置）
                // Red ant (random position)
                // Hormiga roja (posición aleatoria)
                // Fourmi rouge (position aléatoire)
                new Ant(
                    Math.floor(Math.random() * (canvas.width - CELL_SIZE)), 
                    Math.floor(Math.random() * (canvas.height - CELL_SIZE)),
                    'red'
                ),
                // 绿色蚂蚁（随机位置）
                // Green ant (random position)
                // Hormiga verde (posición aleatoria)
                // Fourmi verte (position aléatoire)
                new Ant(
                    Math.floor(Math.random() * (canvas.width - CELL_SIZE)), 
                    Math.floor(Math.random() * (canvas.height - CELL_SIZE)),
                    'green'
                ),
                // 蓝色蚂蚁（随机位置）
                // Blue ant (random position)
                // Hormiga azul (posición aleatoria)
                // Fourmi bleue (position aléatoire)
                new Ant(
                    Math.floor(Math.random() * (canvas.width - CELL_SIZE)), 
                    Math.floor(Math.random() * (canvas.height - CELL_SIZE)),
                    'blue'
                )
            ];
        }
        
        // 绘制网格
        // Draw grid
        // Dibujar cuadrícula
        // Dessiner la grille
        function drawGrid() {
            for (let y = 0; y < gridHeight; y++) {
                for (let x = 0; x < gridWidth; x++) {
                    const cell = grid[y][x];
                    const color = `rgb(${Math.floor(cell.r)}, ${Math.floor(cell.g)}, ${Math.floor(cell.b)})`;
                    ctx.fillStyle = color;
                    ctx.fillRect(x * CELL_SIZE, y * CELL_SIZE, CELL_SIZE, CELL_SIZE);
                }
            }
        }
        
        // 绘制蚂蚁
        // Draw ants
        // Dibujar hormigas
        // Dessiner les fourmis
        function drawAnts() {
            ants.forEach(ant => {
                ctx.fillStyle = ant.getColor();
                ctx.fillRect(ant.x, ant.y, CELL_SIZE, CELL_SIZE);
                
                // 绘制蚂蚁方向指示器
                // Draw ant direction indicator
                // Dibujar indicador de dirección de la hormiga
                // Dessiner l'indicateur de direction de la fourmi
                ctx.strokeStyle = '#FFFFFF';
                ctx.lineWidth = 1;
                ctx.beginPath();
                
                const centerX = ant.x + CELL_SIZE/2;
                const centerY = ant.y + CELL_SIZE/2;
                const headSize = CELL_SIZE * 0.4;
                
                switch (ant.direction) {
                    case 0: // 上 / Up / Arriba / Haut
                        ctx.moveTo(centerX, centerY - headSize);
                        ctx.lineTo(centerX - headSize/2, centerY + headSize/2);
                        ctx.lineTo(centerX + headSize/2, centerY + headSize/2);
                        break;
                    case 1: // 右 / Right / Derecha / Droite
                        ctx.moveTo(centerX + headSize, centerY);
                        ctx.lineTo(centerX - headSize/2, centerY - headSize/2);
                        ctx.lineTo(centerX - headSize/2, centerY + headSize/2);
                        break;
                    case 2: // 下 / Down / Abajo / Bas
                        ctx.moveTo(centerX, centerY + headSize);
                        ctx.lineTo(centerX - headSize/2, centerY - headSize/2);
                        ctx.lineTo(centerX + headSize/2, centerY - headSize/2);
                        break;
                    case 3: // 左 / Left / Izquierda / Gauche
                        ctx.moveTo(centerX - headSize, centerY);
                        ctx.lineTo(centerX + headSize/2, centerY - headSize/2);
                        ctx.lineTo(centerX + headSize/2, centerY + headSize/2);
                        break;
                }
                
                ctx.closePath();
                ctx.stroke();
            });
        }
        
        // 更新信息面板
        // Update info panel
        // Actualizar panel de información
        // Mettre à jour le panneau d'information
        function updateInfoPanel() {
            // 计算运行时间（秒）
            // Calculate running time (seconds)
            // Calcular tiempo de ejecución (segundos)
            // Calculer le temps d'exécution (secondes)
            const runTime = Math.floor((Date.now() - startTime) / 1000);
            runTimeEl.textContent = `${runTime}s`;
            
            // 更新FPS
            // Update FPS
            // Actualizar FPS
            // Mettre à jour FPS
            fpsEl.textContent = fps.toFixed(1);
            
            // 更新速度（每秒步数）
            // Update speed (steps per second)
            // Actualizar velocidad (pasos por segundo)
            // Mettre à jour la vitesse (étapes par seconde)
            const stepsPerSecond = stepsPerFrame * fps;
            speedEl.textContent = `${stepsPerSecond.toFixed(1)}t/s`;
            
            // 更新步数
            // Update step count
            // Actualizar recuento de pasos
            // Mettre à jour le nombre d'étapes
            stepCountEl.textContent = stepCount;
            
            // 更新蚂蚁方向
            // Update ant directions
            // Actualizar direcciones de hormigas
            // Mettre à jour les directions des fourmis
            redDirEl.textContent = ants[0].getDirectionName();
            greenDirEl.textContent = ants[1].getDirectionName();
            blueDirEl.textContent = ants[2].getDirectionName();
        }
        
        // 自动调整速度
        // Auto adjust speed
            // Ajuste automático de velocidad
            // Ajustement automatique de la vitesse
        function adjustSpeed() {
            // 目标FPS为60
            // Target FPS is 60
            // FPS objetivo es 60
            // FPS cible est 60
            const targetFps = 60;
            
            if (fps > targetFps + 5) {
                // 如果FPS高于目标，增加每帧步数
                // If FPS is higher than target, increase steps per frame
                // Si FPS es mayor que el objetivo, aumentar pasos por fotograma
                // Si FPS est supérieur à la cible, augmenter les étapes par image
                stepsPerFrame = Math.min(100, stepsPerFrame + 1);
            } else if (fps < targetFps - 5) {
                // 如果FPS低于目标，减少每帧步数
                // If FPS is lower than target, decrease steps per frame
                // Si FPS es menor que el objetivo, disminuir pasos por fotograma
                // Si FPS est inférieur à la cible, diminuer les étapes par image
                stepsPerFrame = Math.max(1, stepsPerFrame - 1);
            }
        }
        
        // 动画循环
        // Animation loop
        // Bucle de animación
        // Boucle d'animation
        function animate(timestamp) {
            // 计算FPS
            // Calculate FPS
            // Calcular FPS
            // Calculer FPS
            frameCount++;
            if (timestamp >= lastTime + 1000) {
                fps = frameCount * 1000 / (timestamp - lastTime);
                frameCount = 0;
                lastTime = timestamp;
                
                // 根据FPS调整速度
                // Adjust speed based on FPS
                // Ajustar velocidad en función de FPS
                // Ajuster la vitesse en fonction du FPS
                adjustSpeed();
            }
            
            // 清除画布
            // Clear canvas
            // Limpiar lienzo
            // Effacer le canevas
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // 绘制网格
            // Draw grid
            // Dibujar cuadrícula
            // Dessiner la grille
            drawGrid();
            
            // 更新蚂蚁位置
            // Update ant positions
            // Actualizar posiciones de hormigas
            // Mettre à jour les positions des fourmis
            for (let i = 0; i < stepsPerFrame; i++) {
                ants.forEach(ant => {
                    ant.update();
                });
                stepCount++;
            }
            
            // 绘制蚂蚁
            // Draw ants
            // Dibujar hormigas
            // Dessiner les fourmis
            drawAnts();
            
            // 更新信息面板
            // Update info panel
            // Actualizar panel de información
            // Mettre à jour le panneau d'information
            updateInfoPanel();
            
            requestAnimationFrame(animate);
        }
        
        // 初始化应用
        // Initialize application
        // Inicializar aplicación
        // Initialiser l'application
        function init() {
            resizeCanvas();
            startTime = Date.now();
            lastTime = performance.now();
            stepCount = 0;
            stepsPerFrame = 1;
            
            // 设置语言
            // Set language
            // Establecer idioma
            // Définir la langue
            setLanguage(currentLang);
            
            // 开始动画循环
            // Start animation loop
            // Iniciar bucle de animación
            // Démarrer la boucle d'animation
            requestAnimationFrame(animate);
        }
        
        // 重置蚂蚁位置和方向
        // Reset ant positions and directions
        // Restablecer posiciones y direcciones de hormigas
        // Réinitialiser les positions et directions des fourmis
        function resetAnts() {
            ants.forEach(ant => {
                ant.initialX = Math.floor(Math.random() * (canvas.width - CELL_SIZE));
                ant.initialY = Math.floor(Math.random() * (canvas.height - CELL_SIZE));
                ant.reset();
            });
        }
        
        // 窗口大小改变时重置
        // Reset on window resize
        // Restablecer al cambiar el tamaño de la ventana
        // Réinitialiser lors du redimensionnement de la fenêtre
        window.addEventListener('resize', resizeCanvas);
        
        // 重置按钮事件
        // Reset button event
        // Evento de botón de reinicio
        // Événement de bouton de réinitialisation
        resetBtn.addEventListener('click', () => {
            resetAnts();
            initGrid();
            stepCount = 0;
            startTime = Date.now();
        });
        
        // 加速按钮事件
        // Speed up button event
        // Evento de botón de aceleración
        // Événement de bouton d'accélération
        speedUpBtn.addEventListener('click', () => {
            stepsPerFrame = Math.min(100, stepsPerFrame + 5);
        });
        
        // 减速按钮事件
        // Slow down button event
        // Evento de botón de desaceleración
        // Événement de bouton de ralentissement
        speedDownBtn.addEventListener('click', () => {
            stepsPerFrame = Math.max(1, stepsPerFrame - 5);
        });
        
        // 启动应用
        // Launch application
        // Lanzar aplicación
        // Lancer l'application
        init();
    </script>
</body>
</html>