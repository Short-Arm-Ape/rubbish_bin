<!DOCTYPE html>
<!--
Generated by DeepSeek, modified and published by Short_Arm_Ape.
由DeepSeek生成，由短臂猿修改并发布。
Source code URL/源码网址 : https://github.com/Short-Arm-Ape/rubbish_bin/tree/main/Short-Arm-Ape/Wallpaper/RGB_Langton's_Ant.html
Modification time/修改时间 : 2025/6/23-02:13:00
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RGB_Langton's_Ant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #000;
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            height: 100vh;
            color: #fff;
        }
        
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }
        
        .info-panel {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(10, 20, 40, 0.85);
            border: 1px solid rgba(0, 200, 255, 0.6);
            border-radius: 6px;
            padding: 12px;
            z-index: 10;
            width: 100px;
            backdrop-filter: blur(5px);
            box-shadow: 0 0 15px rgba(0, 150, 255, 0.3);
            font-size: 12px;
        }
        
        .info-panel h2 {
            color: #4ff;
            margin-bottom: 8px;
            font-size: 14px;
            text-align: center;
            padding-bottom: 6px;
            border-bottom: 1px solid rgba(0, 200, 255, 0.4);
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            padding: 4px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .info-label {
            color: #aaa;
            min-width: 0px;
        }
        
        .info-value {
            color: #fff;
            font-weight: 500;
            text-align: right;
            min-width: 50px;
        }
        
        .ant-status {
            margin-top: 8px;
        }
        
        .ant-status .info-row {
            display: flex;
            align-items: center;
        }
        
        .ant-color {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 6px;
        }
        
        #redAnt .ant-color { background: #ff5555; }
        #greenAnt .ant-color { background: #55ff55; }
        #blueAnt .ant-color { background: #5555ff; }
        
        .grid-size {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(10, 20, 40, 0.85);
            border: 1px solid rgba(0, 200, 255, 0.6);
            border-radius: 6px;
            padding: 8px 12px;
            z-index: 10;
            font-size: 11px;
            color: #aaa;
        }
    </style>
</head>
<body>
    <canvas id="antCanvas"></canvas>
    
    <div class="info-panel">
        <h2 id="panelTitle">RGB Langton's Ant State</h2>
        <div class="performance-info">
            <div class="info-row">
                <span class="info-label" id="runtimeLabel">Runtime</span>
                <span id="runTime" class="info-value">0s</span>
            </div>
            <div class="info-row">
                <span class="info-label" id="fpsLabel">FPS</span>
                <span id="fps" class="info-value">0</span>
            </div>
            <div class="info-row">
                <span class="info-label" id="speedLabel">Speed</span>
                <span id="speed" class="info-value">0</span>
            </div>
            <div class="info-row">
                <span class="info-label" id="stepsLabel">Total steps</span>
                <span id="stepCount" class="info-value">0</span>
            </div>
        </div>
        
        <div class="ant-status">
            <div id="redAnt" class="info-row">
                <span class="info-label"><span class="ant-color"></span><span id="redLabel">Red ant direction</span></span>
                <span id="redDir" class="info-value">上</span>
            </div>
            <div id="greenAnt" class="info-row">
                <span class="info-label"><span class="ant-color"></span><span id="greenLabel">Green ant direction</span></span>
                <span id="greenDir" class="info-value">上</span>
            </div>
            <div id="blueAnt" class="info-row">
                <span class="info-label"><span class="ant-color"></span><span id="blueLabel">Blue ant direction</span></span>
                <span id="blueDir" class="info-value">上</span>
            </div>
        </div>
    </div>
    
    <div class="grid-size">
        <span id="gridLabel">Grid Size</span>: <span id="gridSize">0×0</span>
    </div>

    <script>
        // 多语言资源
        const translations = {
            en: {
                panelTitle: "Status",
                runtime: "Time",
                fps: "FPS",
                speed: "Speed",
                steps: "Steps",
                redAnt: "R",
                greenAnt: "G",
                blueAnt: "B",
                grid: "Grid",
                directions: ["U", "R", "D", "L"]
            },
            zh: {
                panelTitle: "状态",
                runtime: "时长",
                fps: "帧率",
                speed: "速度",
                steps: "步数",
                redAnt: "红",
                greenAnt: "绿",
                blueAnt: "蓝",
                grid: "网格",
                directions: ["上", "右", "下", "左"]
            },
            es: {
                panelTitle: "Estado de la Hormiga",
                runtime: "Tiempo",
                fps: "FPS",
                speed: "Velocidad",
                steps: "Pasos Totales",
                redAnt: "Roja",
                greenAnt: "Verde",
                blueAnt: "Azul",
                grid: "Cuadrícula",
                directions: ["Arriba", "Derecha", "Abajo", "Izquierda"]
            },
            ja: {
                panelTitle: "状態",
                runtime: "時間",
                fps: "FPS",
                speed: "速度",
                steps: "ステップ数",
                redAnt: "赤",
                greenAnt: "緑",
                blueAnt: "青",
                grid: "グリッド",
                directions: ["上", "右", "下", "左"]
            },
            ko: {
                panelTitle: "상태",
                runtime: "시간",
                fps: "FPS",
                speed: "속도",
                steps: "단계",
                redAnt: "빨간색",
                greenAnt: "녹색",
                blueAnt: "파란",
                grid: "그리드",
                directions: ["위", "오른쪽", "아래", "왼쪽"]
            },
            fr: {
                panelTitle: "Statut",
                runtime: "Heure",
                fps: "FPS",
                speed: "Vitesse",
                steps: "Étapes",
                redAnt: "rouge",
                greenAnt: "Vert",
                blueAnt: "Bleu",
                grid: "Grille",
                directions: ["Haut", "Droite", "Bas", "Gauche"]
            },
            ru: {
                panelTitle: "Статус",
                runtime: "Время",
                fps: "FPS",
                speed: "Скорость",
                steps: "Шаги",
                redAnt: "Красный",
                greenAnt: "Зелёная",
                blueAnt: "Синий",
                grid: "Сетка",
                directions: ["Вверх", "Вправо", "Вниз", "Влево"]
    }
        };
        
        // 当前语言（根据浏览器语言自动设置）
        const browserLang = navigator.language.substring(0, 2);
        const supportedLangs = ['en', 'zh', 'es', 'ja', 'ko','fr','ru'];
        const currentLang = supportedLangs.includes(browserLang) ? browserLang : 'en';
        
        // 获取Canvas元素和上下文
        const canvas = document.getElementById('antCanvas');
        const ctx = canvas.getContext('2d');
        
        // 状态显示元素
        const panelTitle = document.getElementById('panelTitle');
        const runTimeEl = document.getElementById('runTime');
        const fpsEl = document.getElementById('fps');
        const speedEl = document.getElementById('speed');
        const stepCountEl = document.getElementById('stepCount');
        const redDirEl = document.getElementById('redDir');
        const greenDirEl = document.getElementById('greenDir');
        const blueDirEl = document.getElementById('blueDir');
        const gridSizeEl = document.getElementById('gridSize');
        
        // 标签元素
        const runtimeLabel = document.getElementById('runtimeLabel');
        const fpsLabel = document.getElementById('fpsLabel');
        const speedLabel = document.getElementById('speedLabel');
        const stepsLabel = document.getElementById('stepsLabel');
        const redLabel = document.getElementById('redLabel');
        const greenLabel = document.getElementById('greenLabel');
        const blueLabel = document.getElementById('blueLabel');
        const gridLabel = document.getElementById('gridLabel');
        
        // 格子大小（像素）
        const CELL_SIZE = 5;
        
        // 性能变量
        let lastTime = 0;
        let frameCount = 0;
        let fps = 0;
        let startTime = Date.now();
        let stepCount = 0;
        let stepsPerFrame = 1;
        
        // 网格和蚂蚁变量
        let gridWidth, gridHeight;
        let grid = [];
        let ants = [];
        
        // 设置语言
        function setLanguage(lang) {
            const t = translations[lang];
            
            // 更新界面文本
            panelTitle.textContent = t.panelTitle;
            runtimeLabel.textContent = t.runtime;
            fpsLabel.textContent = t.fps;
            speedLabel.textContent = t.speed;
            stepsLabel.textContent = t.steps;
            redLabel.textContent = t.redAnt;
            greenLabel.textContent = t.greenAnt;
            blueLabel.textContent = t.blueAnt;
            gridLabel.textContent = t.grid;
            
            // 更新蚂蚁方向
            updateInfoPanel();
        }
        
        // 设置Canvas大小为窗口大小
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            // 重新计算网格尺寸
            gridWidth = Math.floor(canvas.width / CELL_SIZE);
            gridHeight = Math.floor(canvas.height / CELL_SIZE);
            
            gridSizeEl.textContent = `${gridWidth}×${gridHeight}`;
            
            // 重新初始化网格和蚂蚁
            initGrid();
            initAnts();
        }
        
        // 初始化网格
        function initGrid() {
            grid = new Array(gridHeight);
            for (let y = 0; y < gridHeight; y++) {
                grid[y] = new Array(gridWidth);
                for (let x = 0; x < gridWidth; x++) {
                    grid[y][x] = { r: 0, g: 0, b: 0 }; // 初始化为黑色
                }
            }
        }
        
        // 蚂蚁类定义
        class Ant {
            constructor(x, y, name) {
                this.name = name;
                this.initialX = x;
                this.initialY = y;
                this.reset();
            }
            
            reset() {
                this.x = this.initialX;
                this.y = this.initialY;
                this.direction = 0; // 初始方向：上
            }
            
            getColorComponents() {
                if (this.name === 'red') return { r: 255, g: 0, b: 0 };
                if (this.name === 'green') return { r: 0, g: 255, b: 0 };
                if (this.name === 'blue') return { r: 0, g: 0, b: 255 };
                return { r: 0, g: 0, b: 0 };
            }
            
            getColor() {
                if (this.name === 'red') return '#FF0000';
                if (this.name === 'green') return '#00FF00';
                if (this.name === 'blue') return '#0000FF';
                return '#000000';
            }
            
            // 判断当前格子是否包含蚂蚁的颜色分量
            isBlackCell(gridX, gridY) {
                const cell = grid[gridY][gridX];
                if (this.name === 'red') return cell.r > 0;
                if (this.name === 'green') return cell.g > 0;
                if (this.name === 'blue') return cell.b > 0;
                return false;
            }
            
            // 更新蚂蚁位置和方向
            update() {
                const gridX = Math.floor(this.x / CELL_SIZE);
                const gridY = Math.floor(this.y / CELL_SIZE);
                const comp = this.getColorComponents();
                
                if (this.isBlackCell(gridX, gridY)) {
                    // 黑格：左转90度
                    this.direction = (this.direction + 3) % 4;
                    // 移除蚂蚁的颜色分量
                    grid[gridY][gridX].r = Math.max(0, grid[gridY][gridX].r - comp.r);
                    grid[gridY][gridX].g = Math.max(0, grid[gridY][gridX].g - comp.g);
                    grid[gridY][gridX].b = Math.max(0, grid[gridY][gridX].b - comp.b);
                } else {
                    // 白格：右转90度
                    this.direction = (this.direction + 1) % 4;
                    // 添加蚂蚁的颜色分量
                    grid[gridY][gridX].r = Math.min(255, grid[gridY][gridX].r + comp.r);
                    grid[gridY][gridX].g = Math.min(255, grid[gridY][gridX].g + comp.g);
                    grid[gridY][gridX].b = Math.min(255, grid[gridY][gridX].b + comp.b);
                }
                
                // 根据方向移动蚂蚁
                switch (this.direction) {
                    case 0: // 上
                        this.y -= CELL_SIZE;
                        break;
                    case 1: // 右
                        this.x += CELL_SIZE;
                        break;
                    case 2: // 下
                        this.y += CELL_SIZE;
                        break;
                    case 3: // 左
                        this.x -= CELL_SIZE;
                        break;
                }
                
                // 边界处理（从对边出现）
                if (this.x < 0) this.x = canvas.width - CELL_SIZE;
                if (this.x >= canvas.width) this.x = 0;
                if (this.y < 0) this.y = canvas.height - CELL_SIZE;
                if (this.y >= canvas.height) this.y = 0;
            }
            
            getDirectionName() {
                return translations[currentLang].directions[this.direction];
            }
        }
        
        // 创建三只蚂蚁
        function initAnts() {
            ants = [
                // 红色蚂蚁（左边100像素）
                new Ant(
                    Math.floor(canvas.width / 2) - 100, 
                    Math.floor(canvas.height / 2),
                    'red'
                ),
                // 绿色蚂蚁（屏幕中央）
                new Ant(
                    Math.floor(canvas.width / 2), 
                    Math.floor(canvas.height / 2),
                    'green'
                ),
                // 蓝色蚂蚁（右边100像素）
                new Ant(
                    Math.floor(canvas.width / 2) + 100, 
                    Math.floor(canvas.height / 2),
                    'blue'
                )
            ];
        }
        
        // 绘制网格
        function drawGrid() {
            for (let y = 0; y < gridHeight; y++) {
                for (let x = 0; x < gridWidth; x++) {
                    const cell = grid[y][x];
                    const color = `rgb(${Math.floor(cell.r)}, ${Math.floor(cell.g)}, ${Math.floor(cell.b)})`;
                    ctx.fillStyle = color;
                    ctx.fillRect(x * CELL_SIZE, y * CELL_SIZE, CELL_SIZE, CELL_SIZE);
                }
            }
        }
        
        // 绘制蚂蚁
        function drawAnts() {
            ants.forEach(ant => {
                ctx.fillStyle = ant.getColor();
                ctx.fillRect(ant.x, ant.y, CELL_SIZE, CELL_SIZE);
                
                // 绘制蚂蚁方向指示器
                ctx.strokeStyle = '#FFFFFF';
                ctx.lineWidth = 1;
                ctx.beginPath();
                
                const centerX = ant.x + CELL_SIZE/2;
                const centerY = ant.y + CELL_SIZE/2;
                const headSize = CELL_SIZE * 0.4;
                
                switch (ant.direction) {
                    case 0: // 上
                        ctx.moveTo(centerX, centerY - headSize);
                        ctx.lineTo(centerX - headSize/2, centerY + headSize/2);
                        ctx.lineTo(centerX + headSize/2, centerY + headSize/2);
                        break;
                    case 1: // 右
                        ctx.moveTo(centerX + headSize, centerY);
                        ctx.lineTo(centerX - headSize/2, centerY - headSize/2);
                        ctx.lineTo(centerX - headSize/2, centerY + headSize/2);
                        break;
                    case 2: // 下
                        ctx.moveTo(centerX, centerY + headSize);
                        ctx.lineTo(centerX - headSize/2, centerY - headSize/2);
                        ctx.lineTo(centerX + headSize/2, centerY - headSize/2);
                        break;
                    case 3: // 左
                        ctx.moveTo(centerX - headSize, centerY);
                        ctx.lineTo(centerX + headSize/2, centerY - headSize/2);
                        ctx.lineTo(centerX + headSize/2, centerY + headSize/2);
                        break;
                }
                
                ctx.closePath();
                ctx.stroke();
            });
        }
        
        // 更新信息面板
        function updateInfoPanel() {
            // 计算运行时间（秒）
            const runTime = Math.floor((Date.now() - startTime) / 1000);
            runTimeEl.textContent = `${runTime}s`;
            
            // 更新FPS
            fpsEl.textContent = fps.toFixed(1);
            
            // 更新速度（每秒步数）
            const stepsPerSecond = stepsPerFrame * fps;
            speedEl.textContent = `${stepsPerSecond.toFixed(1)}t/s`;
            
            // 更新步数
            stepCountEl.textContent = stepCount;
            
            // 更新蚂蚁方向
            redDirEl.textContent = ants[0].getDirectionName();
            greenDirEl.textContent = ants[1].getDirectionName();
            blueDirEl.textContent = ants[2].getDirectionName();
        }
        
        // 自动调整速度
        function adjustSpeed() {
            // 目标FPS为60
            const targetFps = 60;
            
            if (fps > targetFps + 5) {
                // 如果FPS高于目标，增加每帧步数
                stepsPerFrame = Math.min(100, stepsPerFrame + 1);
            } else if (fps < targetFps - 5) {
                // 如果FPS低于目标，减少每帧步数
                stepsPerFrame = Math.max(1, stepsPerFrame - 1);
            }
        }
        
        // 动画循环
        function animate(timestamp) {
            // 计算FPS
            frameCount++;
            if (timestamp >= lastTime + 1000) {
                fps = frameCount * 1000 / (timestamp - lastTime);
                frameCount = 0;
                lastTime = timestamp;
                
                // 根据FPS调整速度
                adjustSpeed();
            }
            
            // 清除画布
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // 绘制网格
            drawGrid();
            
            // 更新蚂蚁位置
            for (let i = 0; i < stepsPerFrame; i++) {
                ants.forEach(ant => {
                    ant.update();
                });
                stepCount++;
            }
            
            // 绘制蚂蚁
            drawAnts();
            
            // 更新信息面板
            updateInfoPanel();
            
            requestAnimationFrame(animate);
        }
        
        // 初始化应用
        function init() {
            resizeCanvas();
            startTime = Date.now();
            lastTime = performance.now();
            stepCount = 0;
            stepsPerFrame = 1;
            
            // 设置语言
            setLanguage(currentLang);
            
            // 开始动画循环
            requestAnimationFrame(animate);
        }
        
        // 窗口大小改变时重置
        window.addEventListener('resize', resizeCanvas);
        
        // 启动应用
        init();
    </script>
</body>
</html>